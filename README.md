# airdrop-bot


## Doing
* 捋顺整个流程
* 完善每个步骤的代码表示

## Todo

* ServerChan服务器通知
* 利用aws服务器更换ip
* gas费实时数据
* 步骤中加入随机时间

## Thoughts

* Xvfb可以实现虚拟的显示服务，用来驱动chrome不使用headless模式

## 技术选型

 * 浏览器通讯：chromedp
 * 配置管理： viper
 * 日志服务：uber/zap
 * 数据库：sqlite + gorm
 * 错误处理：pkg/errors

## 主从节点设计

1. 主节点功能

   主机负责调度和总览，数据库只由主节点维护。主节点还要维护从节点列表。每个账户都有一个对应的从节点+节点ip
   1. 维护数据库
   2. 制定各种策略
   
2. 从节点功能

   从节点是具体的执行节点，chrome浏览器部署在从节点，执行具体的操作任务
   1. 接收主节点的指令
   2. 定时向主节点发送心跳（10s/次）
3. 主从之间的接口
   1. 心跳注册接口：从节点定时注册心跳信息，主节点维护这些信息
   2. 下发任务的接口：
   3. 上报任务进度接口：任务结束主动上报任务进度，主节点不主动查询，从节点无状态
4. 接口认证
   1. 实现最简单的通过token来认证，保存在实例的配置文件当中